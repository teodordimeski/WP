<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${dish != null ? 'Edit Dish' : 'Add Dish'}">Dish Form</title>
</head>
<body>
<h1 th:text="${dish != null ? 'Edit Dish' : 'Add Dish'}">Dish Form</h1>

<div th:if="${error}" style="color: red;">
    <p th:text="${error}"></p>
</div>

<form th:action="${dish != null ? '/dishes/edit/' + dish.id : '/dishes/add'}" method="POST">
    <div th:if="${dish != null}">
        <label>ID: <input type="text" name="id" th:value="${dish.id}" readonly/></label><br/>
    </div>
    <label>Name: <input type="text" name="name" th:value="${dish != null ? dish.name : ''}" required/></label><br/>
    <label>Cuisine:
        <select name="cuisine" required>
            <option value="" disabled th:selected="${dish == null}">Select cuisine</option>
            <option th:each="cuisine : ${cuisines}"
                    th:value="${cuisine.name()}"
                    th:text="${cuisine.label}"
                    th:selected="${dish != null and dish.cuisine == cuisine}">
            </option>
        </select>
    </label><br/>
    <label>Preparation Time (min): <input type="number" name="preparationTime" th:value="${dish != null ? dish.preparationTime : ''}" required/></label><br/>
    <label>Chef:
        <select name="chefId">
            <option value="" th:if="${chefs == null or #lists.isEmpty(chefs)}">No chefs available</option>
            <option th:each="chef : ${chefs}"
                    th:value="${chef.id}"
                    th:text="${chef.firstName + ' ' + chef.lastName}"
                    th:selected="${dish != null and dish.chef != null and dish.chef.id == chef.id}">
            </option>
        </select>
    </label><br/>
    <input type="submit" th:value="${dish != null ? 'Update Dish' : 'Add Dish'}"/>
    <a th:href="@{/dishes}">Cancel</a>
</form>
</body>
</html>

